#!/usr/bin/env bash

rm -rf node_modules

# TODO: distinguish between npm <= and > 5.7.1 for ci.
# If a package.json is less than 5.7.1, and has a package-lock.json,
# it will break the build.

if [[ -f package-lock.json ]]; then
  echo "---> Restoring node modules from ./package-lock.json"
  npm ci
else
  echo "---> Installing node modules"
  npm install --no-package-lock
fi
